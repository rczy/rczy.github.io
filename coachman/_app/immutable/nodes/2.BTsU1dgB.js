var ne=Object.defineProperty;var K=r=>{throw TypeError(r)};var oe=(r,e,a)=>e in r?ne(r,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[e]=a;var Q=(r,e,a)=>oe(r,typeof e!="symbol"?e+"":e,a),ce=(r,e,a)=>e.has(r)||K("Cannot "+a);var G=(r,e,a)=>(ce(r,e,"read from private field"),a?a.call(r):e.get(r)),V=(r,e,a)=>e.has(r)?K("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,a);import{e as le,I as de,b as ue,h as ve,l as _e,m as j,M as ge,s as ee,p as me}from"../chunks/Bxa_69_5.js";import{w as fe,s as F,c as H,k as be,e as X,i as Z,b as te,d as ae}from"../chunks/6b4lP7aF.js";import{t as S,s as M,b as k,d as z,c as re}from"../chunks/Te15ARKB.js";import{a0 as O,B as m,F as B,W as I,d as T,X as D,_ as o,Z as x,Y as P,$ as n,D as J,a3 as A,a1 as Y,a8 as $,A as xe,a2 as he,a9 as pe}from"../chunks/Z6j43i41.js";import{p as U,i as N}from"../chunks/D2KKUjeC.js";import{b as se}from"../chunks/C25Zfa6H.js";import{s as C,r as ke}from"../chunks/B0igOVPj.js";import{s as L,g as we,C as Se}from"../chunks/MsSF5OPs.js";import{g as ye}from"../chunks/9kGYRCid.js";import{b as Ee}from"../chunks/DHGFoetn.js";const je=({params:r})=>fe.list.find(a=>a._id===r.id)??le(404,"Not found"),gt=Object.freeze(Object.defineProperty({__proto__:null,load:je},Symbol.toStringTag,{value:"Module"}));var R;class Me{constructor(e){V(this,R,O(0));Q(this,"interval");e&&(this.elapsed=e)}get elapsed(){return m(G(this,R))}set elapsed(e){B(G(this,R),e,!0)}start(){this.interval||(this.interval=setInterval(()=>this.elapsed++,1e3))}stop(){clearInterval(this.interval),this.interval=void 0}reset(){this.stop(),this.elapsed=0,this.start()}getElapsed(){return this.elapsed}getHours(){return this.elapsed/60/60|0}getMinutes(){return this.elapsed/60-this.getHours()*60|0}getSeconds(){return this.elapsed%60}}R=new WeakMap;var De=S('<span><span aria-live="polite"> </span> : <span aria-live="polite"> </span> : <span aria-live="polite"> </span></span>');function We(r,e){I(e,!0);let a=U(e,"countFrom",3,0),h=U(e,"classes",3,""),s=new Me(a());T(()=>()=>{s.stop()});const b=()=>s;var l=De(),d=o(l),v=o(d,!0);n(d);var u=x(d,2),p=o(u,!0);n(u);var _=x(u,2),w=o(_,!0);return n(_),n(l),D((E,c,t,i,g,f,y,W,q)=>{F(l,1,H(["countdown font-mono",h()])),L(d,`--value:${E??""};`),C(d,"aria-label",c),M(v,t),L(u,`--value:${i??""};`),C(u,"aria-label",g),M(p,f),L(_,`--value:${y??""};`),C(_,"aria-label",W),M(w,q)},[()=>s.getHours(),()=>s.getHours().toString(),()=>s.getHours(),()=>s.getMinutes(),()=>s.getMinutes().toString(),()=>s.getMinutes(),()=>s.getSeconds(),()=>s.getSeconds().toString(),()=>s.getSeconds()]),k(r,l),P({getWatch:b})}var Ie=S("<span><!></span>"),Pe=S("<span> </span>"),Ae=S('<div class="card bg-base-100 shadow-sm lg:w-60"><div class="card-body"><h2 class="card-title"> </h2> <div class="grid grid-cols-2 gap-y-2"><span>Exercise:</span> <!> <span>Elapsed:</span> <span><!></span></div></div></div>');function Ce(r,e){I(e,!0);let a;T(()=>(a.getWatch().start(),()=>{a.getWatch().stop()}));const h=()=>{a.getWatch().stop()},s=()=>a.getWatch().getElapsed();var b=Ae(),l=o(b),d=o(l),v=o(d,!0);n(d);var u=x(d,2),p=x(o(u),2);{var _=t=>{var i=Ie(),g=o(i);de(g,{type:"Check"}),n(i),k(t,i)},w=t=>{var i=Pe(),g=o(i);n(i),D(()=>M(g,`${e.progress??""} / ${e.total??""}`)),k(t,i)};N(p,t=>{e.isDone?t(_):t(w,!1)})}var E=x(p,4),c=o(E);return se(We(c,{}),t=>a=t,()=>a),n(E),n(u),n(l),n(b),D(()=>M(v,e.workoutName)),k(r,b),P({haltStopWatch:h,getElapsed:s})}var Ne=S('<div class="my-2"><label><span class="basis-1/2"> </span> <input type="number" class="grow"> <span> </span></label></div>');function ie(r,e){I(e,!0);let a=U(e,"result",15);const h=(_,w)=>w==null||_.value==null?"":_.trend*Math.sign(w-_.value)>=0?"input-success":"input-warning";var s=Ne(),b=o(s),l=o(b),d=o(l,!0);n(l);var v=x(l,2);ke(v);var u=x(v,2),p=o(u,!0);n(u),n(b),n(s),D((_,w)=>{F(b,1,_),M(d,e.goal.name),C(v,"placeholder",w),M(p,e.goal.unit)},[()=>H(["input w:80 sm:w-100",h(e.goal,a())]),()=>{var _;return(_=e.goal.value)==null?void 0:_.toString()}]),ue(v,a),k(r,s),P()}var Fe=S('<img class="rounded-box max-h-60 mb-5 mx-auto">'),He=S('<p class="mb-5"><!></p>'),Oe=(r,e)=>e.onSkip(),Re=(r,e,a)=>e.onNext(m(a)),ze=S('<div class="grow"><h2 class="text-lg font-bold mb-5"> </h2> <!> <!> <div class="flex flex-col items-center"></div> <div class="flex justify-between mt-5"><button class="btn btn-ghost basis-1/3">Skip</button> <button class="btn btn-success basis-1/3">Next</button></div></div>');function Be(r,e){I(e,!0);let a=O(J([])),h=A(()=>{for(const l of m(a))if(l==null)return!1;return!0});T(()=>{B(a,e.exercise.metrics.map(()=>{}),!0)});var s=re(),b=Y(s);be(b,()=>e.exercise._id,l=>{var d=ze(),v=o(d),u=o(v,!0);n(v);var p=x(v,2);{var _=f=>{var y=Fe();D(()=>{C(y,"src",e.exercise.image),C(y,"alt",e.exercise.name)}),k(f,y)};N(p,f=>{e.exercise.image&&f(_)})}var w=x(p,2);{var E=f=>{var y=He(),W=o(y);ve(W,()=>_e(e.exercise.description)),n(y),k(f,y)};N(w,f=>{e.exercise.description&&f(E)})}var c=x(w,2);X(c,21,()=>e.exercise.metrics,Z,(f,y,W)=>{ie(f,{get goal(){return m(y)},get result(){return m(a)[W]},set result(q){m(a)[W]=q}})}),n(c);var t=x(c,2),i=o(t);i.__click=[Oe,e];var g=x(i,2);g.__click=[Re,e,a],n(t),n(d),D(()=>{M(u,e.exercise.name),g.disabled=!m(h)}),te(1,d,()=>ae,()=>({x:50})),k(l,d)}),k(r,s),P()}z(["click"]);var Te=(r,e,a,h)=>{var s;return e.onAdjust(a(),h(),((s=e.performedExercise)==null?void 0:s.results)??[])},Ye=S("<button> </button>"),qe=S("<img>"),Ge=S('<li><div><!></div> <div><div> </div> <div class="text-xs font-semibold opacity-60 flex flex-wrap gap-2 mt-3"><!></div></div></li>');function Le(r,e){I(e,!0);const a=(c,t=$,i=$)=>{var g=Ye();g.__click=[Te,e,t,i];var f=o(g);n(g),D(()=>{F(g,1,H(["btn badge badge-outline",t().trend*i().trend>=0?"badge-success":"badge-warning"])),M(f,`${(t().trend*i().trend>0?"ðŸ”¥":"")??""} ${t().name??""}: ${i().value??""} / ${t().value??""} ${t().unit??""}`)}),k(c,g)},h=c=>{var t;return((t=e.performedExercise)==null?void 0:t.results.find(i=>i._id===c))??{}};var s=Ge(),b=o(s),l=o(b);{var d=c=>{var t=qe();D(()=>{F(t,1,H(["w-20 rounded-box hidden sm:block",{grayscale:!e.performedExercise}])),C(t,"src",e.exerciseData.image)}),k(c,t)};N(l,c=>{e.exerciseData.image&&c(d)})}n(b);var v=x(b,2),u=o(v),p=o(u,!0);n(u);var _=x(u,2),w=o(_);{var E=c=>{var t=re(),i=Y(t);X(i,17,()=>e.exerciseData.metrics,Z,(g,f)=>{var y=xe(()=>h(m(f)._id));a(g,()=>m(f),()=>m(y))}),k(c,t)};N(w,c=>{e.performedExercise&&c(E)})}n(_),n(v),n(s),D(()=>{F(s,1,H(["list-row",{"opacity-40":!e.performedExercise}])),M(p,e.exerciseData.name)}),k(r,s),P()}z(["click"]);var Ue=(r,e)=>e(),Xe=(r,e)=>e(),Ze=S('<button class="btn btn-ghost">Cancel</button> <button class="btn btn-success">Done</button>',1),Je=S('<div class="flex justify-center"><!></div>');function Ke(r,e){I(e,!0);let a=A(()=>j.isActive());const h=()=>j.submit(),s=()=>j.cancel();T(()=>{e.goal.value==null||j.subject.value==null||(j.subject.trend=Math.sign(j.subject.value-e.goal.value))}),ge(r,{get show(){return m(a)},onclose:()=>s(),title:"Adjusting metric",action:l=>{var d=Ze(),v=Y(d);v.__click=[Ue,s];var u=x(v,2);u.__click=[Xe,h],D(()=>u.disabled=!j.subject.value),k(l,d)},children:(l,d)=>{var v=Je(),u=o(v);ie(u,{get goal(){return e.goal},get result(){return j.subject.value},set result(p){j.subject.value=p}}),n(v),k(l,v)},$$slots:{action:!0,default:!0}}),P()}z(["click"]);var Qe=S('<div class="flex flex-col"><p class="leading-8"><span class="font-semibold">Great job!</span><br>You have completed the exercises, get some rest.</p> <div class="self-center"><!></div></div>'),Ve=(r,e)=>{e.workout.sessions.push(e.workoutSession),me.updateWorkout(e.workout._id,{sessions:ee(e.workout.sessions)}),ye(`${Ee}/${e.workout._id}`)},$e=S('<div><!> <ul class="list mt-7"><li class="pb-2 opacity-60 tracking-wide">Performed exercises</li> <!></ul> <div class="flex justify-center"><button class="btn btn-success w-60 mt-7">Finish session</button></div></div> <!>',1);function et(r,e){I(e,!0);let a=O(J({}));const h=c=>e.workoutSession.performedExercises.find(t=>t.exerciseId===c),s=(c,t,i)=>{B(a,c,!0),j.edit(ee(t),i)};var b=$e(),l=Y(b),d=o(l);{var v=c=>{var t=Qe(),i=x(o(t),2),g=o(i);const f=A(we);Se(g,{x:[-2,2],y:[-1,.5],xSpread:.3,delay:[0,250],destroyOnComplete:!0,duration:3e3,size:50,get colorArray(){return m(f)}}),n(i),n(t),k(c,t)};N(d,c=>{e.workoutSession.performedExercises.length&&c(v)})}var u=x(d,2),p=x(o(u),2);X(p,17,()=>e.workout.exercises,Z,(c,t)=>{const i=A(()=>h(m(t)._id));Le(c,{get exerciseData(){return m(t)},get performedExercise(){return m(i)},onAdjust:s})}),n(u);var _=x(u,2),w=o(_);w.__click=[Ve,e],n(_),n(l);var E=x(l,2);Ke(E,{get goal(){return m(a)}}),te(1,l,()=>ae,()=>({x:50})),k(r,b),P()}z(["click"]);var tt=S('<aside class="lg:flex flex-col gap-5 items-start justify-start mb-8"><!></aside>'),at=S('<div class="mt-8 lg:grid grid-cols-3"><!> <!> <div></div></div>');function mt(r,e){I(e,!0);const a=t=>{var i=tt(),g=o(i);const f=A(()=>m(s)+1),y=A(()=>!m(l));se(Ce(g,{get workoutName(){return e.data.name},get progress(){return m(f)},get total(){return e.data.exercises.length},get isDone(){return m(y)}}),W=>d=W,()=>d),n(i),k(t,i)};let h=J({date:new Date,duration:0,performedExercises:[]}),s=O(0),b=A(()=>e.data.exercises[m(s)]),l=O(!0),d;const v=t=>{const i=[];m(b).metrics.map((g,f)=>{g.value==null||t[f]==null||i.push({_id:g._id,name:g.name,trend:Math.sign(t[f]-g.value),value:t[f],unit:g.unit})}),h.performedExercises.push({exerciseId:m(b)._id,results:i})},u=()=>{if(m(s)==e.data.exercises.length-1){d.haltStopWatch(),B(l,!1),h.duration=d.getElapsed();return}pe(s)};var p=at(),_=o(p);a(_);var w=x(_,2);{var E=t=>{Be(t,{get exercise(){return m(b)},onSkip:()=>u(),onNext:i=>{v(i),u()}})},c=t=>{et(t,{get workout(){return e.data},get workoutSession(){return h}})};N(w,t=>{m(l)?t(E):t(c,!1)})}he(2),n(p),k(r,p),P()}export{mt as component,gt as universal};
